run:
  timeout: 5m
  tests: true
  modules-download-mode: readonly

output:
  formats:
  - format: colored-line-number
  print-linter-name: true

linters-settings:
  gocyclo:
    min-complexity: 15
  gocritic:
    enabled-tags:
    - diagnostic
    - experimental
    - opinionated
    - performance
    - style
  gofmt:
    simplify: true
  goimports:
    local-prefixes: github.com/catherinevee/driftmgr
  mnd:
    checks: [ argument, case, condition, operation, return, assign ]
  govet:
    enable:
    - atomicalign
    - deepequalerrors
    - findcall
    - nilness
    - reflectvaluecompare
    - unusedwrite
  misspell:
    locale: US
  nakedret:
    max-func-lines: 30
  prealloc:
    for-loops: true
    range-loops: true

linters:
  enable:
  - bodyclose
  - copyloopvar
  - dogsled
  - dupl
  - errcheck
  - gochecknoinits
  - goconst
  - gocritic
  - gocyclo
  - gofmt
  - goimports
  - goprintffuncname
  - gosec
  - gosimple
  - govet
  - ineffassign
  - misspell
  - mnd
  - nakedret
  - noctx
  - nolintlint
  - prealloc
  - revive
  - rowserrcheck
  - predeclared
  - staticcheck
  - stylecheck
  - typecheck
  - unconvert
  - unparam
  - unused
  - whitespace

issues:
  uniq-by-line: true
  exclude-rules:
    - path: _test\.go
      linters:
        - mnd
        - gocyclo
        - goconst
        - typecheck
        - unused
        - ineffassign
    - path: cmd/
      linters:
        - mnd
    - path: tests/
      linters:
        - typecheck
        - unused
        - ineffassign
        - goconst
        - gocyclo
        - mnd
    - path: internal/providers/aws/provider_test.go
      linters:
        - typecheck
    - path: internal/remediation/strategies/code_as_truth_test.go
      linters:
        - typecheck
    - text: "Error return value of .((os\\.)?std(out|err)\\..*|.*Close|.*Flush|os\\.Remove(All)?|.*printf?|os\\.(Un)?Setenv) is not checked"
      linters:
        - errcheck
    - text: "exported (function|method|type|var|const) .* should have comment"
      linters:
        - revive
    - text: "should have a package comment"
      linters:
        - revive
